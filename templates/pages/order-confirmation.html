{{#partial "head"}}
{{{ checkout.checkout_head }}}
{{{ stylesheet '/assets/css/optimized-checkout.css' }}}
{{ getFontsCollection }}

<script type="text/javascript">
    window.language = {{{langJson 'optimized_checkout'}}};
</script>

{{{head.scripts}}}

{{/partial}}

{{#partial "page"}}
<header class="checkoutHeader optimizedCheckout-header">
    <div class="checkoutHeader-content">
        <h1 class="is-srOnly">{{lang 'checkout.title'}}</h1>
        <h2 class="checkoutHeader-heading">
            <a class="checkoutHeader-link" href="{{urls.home}}">
                {{#if checkout.header_image}}
                    <img alt="{{settings.store_logo.title}}" class="checkoutHeader-logo" id="logoImage" src="{{ checkout.header_image }}"/>
                {{ else }}
                    <span class="header-logo-text">{{settings.store_logo.title}}</span>
                {{/if}}
            </a>
        </h2>
    </div>
</header>

{{{ checkout.order_confirmation_content }}}

{{{ footer.scripts }}}
<!-- for bundleb2b start-->
<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

<script>
    // 20210115 add https://youtrack.silksoftware.com/issue/B3PS-26:  Checkout Customization
    const orderConfirmationOrderStatusText = 'We have received your order and is awaiting payment. please contact us at 877-437-4455 to make payment; if you have already made payment arrangement. these will be automatically applied. You will recevie an email confirmation when payment is confirmed.'
    const optimizedCheckoutHeadingPrimary = 'Thank you!'

    let intervalId = setInterval(() => {
        if ($('.optimizedCheckout-headingPrimary') && $('.optimizedCheckout-headingPrimary').text() !== 'Thank you!' && $('.order-confirmation-order-status-text').text() !== orderConfirmationOrderStatusText) {
            $('.optimizedCheckout-headingPrimary').text(optimizedCheckoutHeadingPrimary)
            $('.orderConfirmation-section p:nth-of-type(2)').text(orderConfirmationOrderStatusText)
        } else {
            clearInterval(intervalId)
        }
    }, 800);

    let intervalId2 = setInterval(() => {
        if ($('.cart-section') && $('.cart-section:nth-of-type(2) > div:nth-of-type(3) .cart-priceItem-value').text() !== 'TBD') {
            $('.cart-section:nth-of-type(2) div[data-test="cart-shipping"] .cart-priceItem-label').text('Shipping: To be determined offline')
            $('.cart-section:nth-of-type(2) div[data-test="cart-shipping"] .cart-priceItem-value').text('TBD')
            $('.cart-section:nth-of-type(2) div[data-test="cart-taxes"] .cart-priceItem-label').text('Tax: To be determined offline')
            $('.cart-section:nth-of-type(2) div[data-test="cart-taxes"] .cart-priceItem-value').text('TBD')
        } else {
            clearInterval(intervalId2)
        }
    }, 800);
    // 20210115 end

</script>
<!-- for bundleb2b end-->
{{/partial}}

{{> layout/empty}}
