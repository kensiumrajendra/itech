{{#partial "head"}}

{{{ checkout.checkout_head }}}
{{{ stylesheet '/assets/css/optimized-checkout.css' }}}
{{ getFontsCollection }}

<script type="text/javascript">
    window.language = {{{langJson 'optimized_checkout'}}};
</script>

{{{head.scripts}}}

{{/partial}}

{{#partial "page"}}
<header class="checkoutHeader optimizedCheckout-header">
    <div class="checkoutHeader-content">
        <h1 class="is-srOnly">{{lang 'checkout.title'}}</h1>
        <h2 class="checkoutHeader-heading">
            <a class="checkoutHeader-link" href="{{urls.home}}">
                {{#if checkout.header_image}}
                    <img alt="{{settings.store_logo.title}}" class="checkoutHeader-logo" id="logoImage" src="{{ checkout.header_image }}"/>
                {{ else }}
                    <span class="header-logo-text">{{settings.store_logo.title}}</span>
                {{/if}}
            </a>
        </h2>
    </div>
</header>

{{{ checkout.checkout_content }}}

{{{ footer.scripts }}}

{{/partial}}

{{> layout/empty}}

<!-- b3 start -->
<!-- 20210119: featureï¼šHide "Coupon/Gift Certificate" section from Order Summary. -->
<style lang="scss">
    .redeemable-label{
        display: none!important;
    }
</style>
<script>
    let intervalId = setInterval(() => {
        const shippingValDom = document.querySelector('[data-test="cart-shipping"] [data-test="cart-price-value"]')
        const shippingKeyText = 'Shipping: To be determined offline'
        const taxKeyText = 'Tax: To be determined offline'
        const valText = 'TBD'
        
        if (shippingValDom && shippingValDom.innerText !== 'TBD') {
            
            shippingValDom.innerText = valText
            document.querySelector('[data-test="cart-shipping"] [data-test="cart-price-label"]').innerText = shippingKeyText
            document.querySelector('[data-test="cart-taxes"] [data-test="cart-price-label"]').innerText = taxKeyText
            document.querySelector('[data-test="cart-taxes"] [data-test="cart-price-value"]').innerText = valText
            clearInterval(intervalId)
        }

    }, 800);
</script>
<!-- b3 end -->
